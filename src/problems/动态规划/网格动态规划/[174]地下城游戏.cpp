//
//
// ä¸€äº›æ¶é­”æŠ“ä½äº†å…¬ä¸»ï¼ˆPï¼‰å¹¶å°†å¥¹å…³åœ¨äº†åœ°ä¸‹åŸçš„å³ä¸‹è§’ã€‚åœ°ä¸‹åŸæ˜¯ç”± M x N
// ä¸ªæˆ¿é—´ç»„æˆçš„äºŒç»´ç½‘æ ¼ã€‚æˆ‘ä»¬è‹±å‹‡çš„éª‘å£«ï¼ˆKï¼‰æœ€åˆè¢«å®‰ç½®åœ¨å·¦ä¸Šè§’çš„æˆ¿é—´é‡Œï¼Œä»–å¿…é¡»ç©¿
//è¿‡åœ°ä¸‹åŸå¹¶é€šè¿‡å¯¹æŠ—æ¶é­”æ¥æ‹¯æ•‘å…¬ä¸»ã€‚
//
// éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°ä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æœä»–çš„å¥åº·ç‚¹æ•°åœ¨æŸä¸€æ—¶åˆ»é™è‡³ 0
// æˆ–ä»¥ä¸‹ï¼Œä»–ä¼šç«‹å³æ­»äº¡ã€‚
//
// æœ‰äº›æˆ¿é—´ç”±æ¶é­”å®ˆå«ï¼Œå› æ­¤éª‘å£«åœ¨è¿›å…¥è¿™äº›æˆ¿é—´æ—¶ä¼šå¤±å»å¥åº·ç‚¹æ•°ï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†æŸå¤±å¥åº·ç‚¹æ•°ï¼‰ï¼›å…¶ä»–æˆ¿é—´è¦ä¹ˆæ˜¯ç©ºçš„ï¼ˆæˆ¿é—´é‡Œçš„å€¼ä¸º
// 0ï¼‰ï¼Œè¦ä¹ˆ
//åŒ…å«å¢åŠ éª‘å£«å¥åº·ç‚¹æ•°çš„é­”æ³•çƒï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºæ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†å¢åŠ å¥åº·ç‚¹æ•°ï¼‰ã€‚
//
// ä¸ºäº†å°½å¿«åˆ°è¾¾å…¬ä¸»ï¼Œéª‘å£«å†³å®šæ¯æ¬¡åªå‘å³æˆ–å‘ä¸‹ç§»åŠ¨ä¸€æ­¥ã€‚
//
//
//
// ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç¡®ä¿éª‘å£«èƒ½å¤Ÿæ‹¯æ•‘åˆ°å…¬ä¸»æ‰€éœ€çš„æœ€ä½åˆå§‹å¥åº·ç‚¹æ•°ã€‚
//
// ä¾‹å¦‚ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹å¸ƒå±€çš„åœ°ä¸‹åŸï¼Œå¦‚æœéª‘å£«éµå¾ªæœ€ä½³è·¯å¾„ å³ -> å³ -> ä¸‹ ->
// ä¸‹ï¼Œåˆ™éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°è‡³å°‘ä¸º 7ã€‚
//
//
//
// -2 (K)
// -3
// 3
//
//
// -5
// -10
// 1
//
//
// 10
// 30
// -5 (P)
//
//
//
//
//
//
// è¯´æ˜:
//
//
//
// éª‘å£«çš„å¥åº·ç‚¹æ•°æ²¡æœ‰ä¸Šé™ã€‚
//
// ä»»ä½•æˆ¿é—´éƒ½å¯èƒ½å¯¹éª‘å£«çš„å¥åº·ç‚¹æ•°é€ æˆå¨èƒï¼Œä¹Ÿå¯èƒ½å¢åŠ éª‘å£«çš„å¥åº·ç‚¹æ•°ï¼ŒåŒ…æ‹¬éª‘å£«è¿›å…¥çš„å·¦ä¸Šè§’æˆ¿é—´ä»¥åŠå…¬ä¸»è¢«ç›‘ç¦çš„å³ä¸‹è§’æˆ¿é—´ã€‚
// Related Topics äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’
// ğŸ‘ 470 ğŸ‘ 0

// leetcode submit region begin(Prohibit modification and deletion)
#include <algorithm>
#include <vector>
using std::vector;

/// åŠ¨æ€è§„åˆ’
// ç”±äºè¿™é‡Œçš„è·¯å¾„ä¸­å­˜åœ¨è´Ÿæ•°ï¼Œè€Œä¸”æ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œéƒ½ä¸èƒ½è®©å€¼ <=
// 0ï¼Œå› æ­¤è¯¥é¢˜è§„åˆ’çš„æ—¶å€™ï¼Œéœ€è¦åŒæ—¶ä¿è¯
// åˆå§‹å€¼å’Œç§»åŠ¨è·¯å¾„çš„æœ€ä¼˜åŒ–ï¼Œä½†æ˜¯ä»ä¸Šåˆ°ä¸‹æ— æ³•åŒæ—¶æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå› æ­¤è€ƒè™‘ä»ä¸‹è‡³ä¸Šè§„åˆ’ã€‚
// dp[i][j] å®šä¹‰ä¸ºä» <i,j> å‡ºå‘æ‰€éœ€çš„æœ€å°åˆå§‹å€¼ï¼Œ
// åˆ™ dp[i][j] = max(1,min(dp[i+1][j], dp[i][j+1])-dungeon[i][j])
class Solution {
 public:
  int calculateMinimumHP(vector<vector<int>>& dungeon) {
    if (dungeon.empty() || dungeon[0].empty()) return 1;
    int height = dungeon.size();
    int width = dungeon[0].size();
    vector<vector<int>> dp(height, vector<int>(width, 1));
    // base case
    dp[height - 1][width - 1] = std::max(1, 1 - dungeon[height - 1][width - 1]);
    // height æ–¹å‘
    for (int i = height - 2; i >= 0; --i) {
      dp[i][width - 1] =
          std::max(1, dp[i + 1][width - 1] - dungeon[i][width - 1]);
    }
    // width æ–¹å‘
    for (int j = width - 2; j >= 0; --j) {
      dp[height - 1][j] =
          std::max(1, dp[height - 1][j + 1] - dungeon[height - 1][j]);
    }

    // çŠ¶æ€è½¬ç§»
    for (int i = height - 2; i >= 0; --i) {
      for (int j = width - 2; j >= 0; --j) {
        dp[i][j] =
            std::max(1, std::min(dp[i + 1][j], dp[i][j + 1]) - dungeon[i][j]);
      }
    }
    return dp[0][0];
  }
};
// leetcode submit region end(Prohibit modification and deletion)
